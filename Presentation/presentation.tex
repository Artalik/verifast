\documentclass[]{beamer}

\setbeamertemplate{footline}[frame number]
\setbeamertemplate{navigation symbols}{}

%\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[francais]{babel}
\usepackage{listings}
\usepackage{tikz}
\usepackage{mathdots}
\usepackage{yhmath}
\usepackage{syntax}
\usepackage{relsize,exscale}
\usepackage{stmaryrd}
\usepackage{cancel}
\usepackage{color}
\usepackage{siunitx}
\usepackage{array}
\usepackage{multirow}
\usepackage{amssymb,MnSymbol}
\usepackage{gensymb}
\usepackage{booktabs}
\usepackage{geometry}

\newtheorem*{idea}{Idea of proof}

\newcommand{\verifast}{VeriFast}
\newcommand\phibra{\llbracket\phi\rrbracket}
\newcommand\psibra{\llbracket\psi\rrbracket}
\newcommand{\inductive}{\textit{inductive}}

\lstset{language={C}}
\lstset{alsoletter={&},morekeywords={requires,ensures,close,open,fixpoint,inductive,predicate,array,true,false,lemma,&*&}}
\lstset{showstringspaces=false}

\setlength{\parskip}{1em}

\title{Ajout de la th\'eorie logique des tableaux dans VeriFast}
\author{Pierre Nigron}
\date{29 Juin 2018}
\begin{document}
\frame{\titlepage}
\setbeamercovered{invisible}

\begin{frame}[noframenumbering,plain]
\tableofcontents
\end{frame}

\section{Motivation}

\begin{frame}[noframenumbering,plain]
\tableofcontents[currentsection]
\end{frame}




\begin{frame}{Contexte}
  	Les programmes informatiques sont pr\'esent dans des situations critiques :
  	\begin{itemize}  	
  	\item m\'etro (ligne 14)
  	\item m\'edecine (pompe \`a insuline)
  	\item \'energie (sur\^et\'e des centrales nucl\'eaires)
  	\item et plein d'autres...
  	\end{itemize}
\end{frame}




\begin{frame}{Correction d'un programme}
	Un programme est correct s'il respecte sa sp\'ecification en toutes circonstances.
	
	V\'erifier qu'un programme est correct est un probl\`eme ind\'ecidable.
	
\end{frame}






\begin{frame}{M\'ethodes de v\'erification}
	La m\'ethode la plus courante : Test $\rightarrow$ incomplet
	
	Autre m\'ethode : Prouver un programme avec la v\'erification d\'eductive

\end{frame}






\begin{frame}[fragile]{V\'erification d\'eductive}
	La m\'ethode d\'eductive de \verifast{} utilise la logique de Hoare.
	
	Triplet de Hoare: pr\'econdition+programme+postcondition
	
	\begin{lstlisting}
	
	int exemple(int a,int b)
		 //@ requires a = b;
		 //@ ensures result = 0;
		{ return a-b;}
		
	\end{lstlisting}
\end{frame}






\begin{frame}{\verifast}
	\verifast{} est un outil de v\'erification d\'eductive de programmes C ou Java. (B.Jacobs, J.Smans , F.Piessens \`a l'universit\'e de Leuven) 
	
	\verifast{} assure entre autres :
	\begin{itemize}
	\item Pas d'acc\'es ill\'egaux \`a la m\'emoire
	\item Les contrats sont respect\'es. (pr\'e/postcondition) 
\end{itemize}	
Cet outil est bas\'e sur la logique de s\'eparation et r\'esout les \'enonc\'es math\'ematiques avec les SMT-solveurs Redux et Z3.
\end{frame}






\begin{frame}[fragile]{Motivations}

\begin{lstlisting}[basicstyle=\footnotesize]
void swap (int* a, int i, int j)
{int b = a[i];  a[i] = a[j];  a[j] = b;}

int partition (int* a, int lo, int hi)
{ int pivot = a[hi]; int i = lo - 1; int j;
  for (j = lo; j < hi; j++) {
    if (a[j] < pivot) {i++; if (i < j) swap(a, i, j);}
  }
  i++; if (i < hi) swap(a, i, hi); return i;}
  
void quicksort (int* a, int lo, int hi)
{if (lo > hi) return;
 int p = partition(a, lo, hi);
 quicksort(a, lo, p-1);
 quicksort(a, p+1, hi);}

		\end{lstlisting}
\textbf{Pr\'econdition} : Avoir un tableau bien d\'efini\\
\textbf{Postcondition} : Avoir un tableau bien d\'efini, un multi-ensemble d'\'elements identique et un tableau tri\'e.
\end{frame}








\begin{frame}{Contributions}
	\begin{enumerate}
		\item Automatiser la th\'eorie des tableaux dans \verifast.
		\item Ajouter des biblioth\`eques pour la th\'eorie des tableaux et des multi-ensembles.
		\item Prouver le Quicksort \`a l'aide de \verifast
	\end{enumerate}
\end{frame}






\section{Th\'eorie des tableaux}

\begin{frame}[noframenumbering,plain]
\tableofcontents[currentsection]
\end{frame}






\begin{frame}{Logique du premier ordre}
	Une \textbf{signature} $\Sigma$ est une paire $\Sigma=(\Sigma^s,\Sigma^f)$
	
	\begin{tabular}{lcll}
t & ::= & x & $x^\sigma\in Var$ et $\sigma\in\Sigma^s$\\
 & $|$ & $f(t_1,\ldots,t_n)$ & $t_1^{\sigma_1},\ldots,t_n^{\sigma_n}$ et $f^{\sigma_1\ldots\sigma_n\sigma}\in\Sigma^f$
 
\end{tabular}

Une \textbf{formule} du premier ordre :

\begin{tabular}{lclcl}
$\phi^{FOL}$ & $::=$ &  $t_{1} \approx t_{2},$ & $t_{1}^{\sigma},t_{2}^{\sigma}$ & (\'egalit\'e)\\
 & $|$ & $\neg\phi^{FOL},$ & & (n\'egation)\\
 & $|$ & $\phi_{1}^{FOL} \land \phi_{2}^{FOL}$ & & (conjonction)\\
 & $|$ & $\phi_{1}^{FOL} \lor \phi_{2}^{FOL}$ & & (disjonction)\\
 & $|$ & $\exists x.\phi^{FOL},$ & $x\in FV(\phi^{FOL})$ & (quantificateur existentiel)\\
 & $|$ & $\forall x.\phi^{FOL},$ & $x\in FV(\phi^{FOL})$ & (quantificateur universel)

\end{tabular}
\end{frame}







\begin{frame}[fragile]{Th\'eorie des tableaux}
	Soit $\sigma_I$ le type des indices, $\sigma_E$ le type des \'el\'ements et $\sigma_A$ le type du tableau.
	
	La th\'eorie des tableaux est munie de la signature : $\Sigma^s=\{\sigma_I,\sigma_E,\sigma_A\}$ \\et $\Sigma^f=\{select^{\sigma_A\sigma_I\sigma_E},store^{\sigma_A\sigma_I\sigma_E\sigma_A},constant\_array^{\sigma_E\sigma_A},array\_ext^{\sigma_A\sigma_A\sigma_I}\}$.
	
Exemple :
	\[\exists a\in\sigma_A \exists i,j\in\sigma_I, select(a,i)\neq select(a,j)\]

\end{frame}










\begin{frame}{Axiomes}
Axiomes de select et store :

	$\forall a\in \sigma_A.$ $\forall e\in \sigma_E.$ $\forall i,j\in \sigma_I.$
	\textit{select(store($a,i,e$)$,i$) $ = e$}
	
	$\forall a\in \sigma_A.$ $\forall e\in \sigma_E.$ $\forall i,j\in \sigma_I.$ 
	\\ \hspace{20pt}
	$i\neq j \rightarrow$ select(store($a,i,e$)$,j$) $=$ select($a,j$)
			  		
Axiome de constant_array et select :
  
    $\forall e\in\sigma_E.$ $\forall i\in \sigma_I.$ $select(constant\_array(e),i)$ $= e$
    
Axiome de l'extensionalit\'e :

	$\forall a,b\in\sigma_A. \ a \neq b\rightarrow$ \\ $\hspace{20pt}select(a,array\_ext(a,b)) \neq select(b,array\_ext(a,b))$
	
	

	
\end{frame}





\section{\verifast}




\begin{frame}[noframenumbering,plain]
\tableofcontents[currentsection]
\end{frame}





\begin{frame}[fragile]{Logique de sp\'ecification de \verifast}

\begin{lstlisting}[basicstyle=\footnotesize]
struct list { struct list *next; int value; };
				
inductive ints = ints_nil | ints_cons(int, ints);

predicate lists(struct list *list, ints num) =
	list == NULL ? num == ints_nil :
	num == ints_cons(?number,?num2) 
	&*& list -> next |-> ?n &*& list->value |-> number
	&*& lists(n,num2);
	
fixpoint int length_ints(ints l){
 switch(l) {
  case ints_nil : return 0;
  case ints_cons(h,t) : return 1 + length_ints(t);
 }}
 
 lemma void empty_list(struct list *l)
  requires l == NULL;
  ensures lists(l,ints_nil);
 {close lists(l,ints_nil);}
	\end{lstlisting}

\end{frame}








\section{Automatisation de la th\'eorie des tableaux}



\begin{frame}[noframenumbering,plain]
\tableofcontents[currentsection]
\end{frame}

\begin{frame}{Automatisation de la th\'eorie des tableaux}

\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,498.23333740234375); %set diagram left start at 0, and has height of 498.23333740234375

\draw    (129, 49.51) rectangle (317.82, 227.83)   ;
\draw    (155.28,24.42) -- (155.28,49.78) ;
\draw [shift={(155.28,49.78)}, rotate = 270] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.6,34.47) -- (274.52,49.78) ;
\draw [shift={(274.52,49.78)}, rotate = 270.29] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.57, 62.49) rectangle (275.28, 86.08)   ;
\draw    (155.28,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 190.34] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.52,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 345.64] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (224.93,86.08) -- (225.15,98.15) ;
\draw [shift={(225.15,98.15)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.8, 98.15) rectangle (275.51, 121.75)   ;
\draw    (225.15,121.75) -- (225.38,133.82) ;
\draw [shift={(225.38,133.82)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (175.03, 133.82) rectangle (277.56, 183.18)   ;
\draw    (226.14,182.42) -- (226.37,194.49) ;
\draw [shift={(226.37,194.49)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (170.7, 194.49) rectangle (276.04, 218.09)   ;
\draw    (200.09, 263.87) rectangle (246.42, 287.47)   ;
\draw    (222.88,246.56) -- (223.26,263.87) ;
\draw [shift={(223.26,263.87)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (223.37,218.09) -- (223.75,235.4) ;
\draw [shift={(223.75,235.4)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;


\draw (153.34,16.43) node  [align=left] {{\footnotesize C}};
\draw (274.07,16.83) node  [align=left] {{\footnotesize Annotations}\\
{\footnotesize (logique de s\'eparation)}};
\draw (223.94,73.69) node  [align=left] {{\footnotesize Parsing}};
\draw (226.22,109.08) node  [align=left] {{\footnotesize Typing}};
\draw (230.02,156.71) node  [align=left] {{\footnotesize G\'en\'eration des }\\{\footnotesize conditions de }\\{\footnotesize verification}};
\draw (226.22,205.53) node  [align=left] {{\footnotesize Boxing}};
\draw (223.18,273.01) node  [align=left] {{\footnotesize Z3}};
\draw (224.42,239.25) node  [align=left] {{\footnotesize Logique du premier ordre }};
\draw (424.42,73.25) node  [align=left] {{\footnotesize L'impl\'ementation de l'automatisation }\\ {\footnotesize se divise en deux parties :}};
\draw (424.42,109.08) node  [align=left] {{\footnotesize 1. Ajouter un type tableau}\\ {\footnotesize 2. Ajouter les fonctions de la th\'eorie}};

\end{tikzpicture}

\end{frame}




\begin{frame}{Logique de sp\'ecification}
\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,498.23333740234375); %set diagram left start at 0, and has height of 498.23333740234375

\draw    (129, 49.51) rectangle (317.82, 227.83)   ;
\draw    (155.28,24.42) -- (155.28,49.78) ;
\draw [shift={(155.28,49.78)}, rotate = 270] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.6,34.47) -- (274.52,49.78) ;
\draw [shift={(274.52,49.78)}, rotate = 270.29] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.57, 62.49) rectangle (275.28, 86.08)   ;
\draw    (155.28,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 190.34] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.52,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 345.64] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (224.93,86.08) -- (225.15,98.15) ;
\draw [shift={(225.15,98.15)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.8, 98.15) rectangle (275.51, 121.75)   ;
\draw    (225.15,121.75) -- (225.38,133.82) ;
\draw [shift={(225.38,133.82)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (175.03, 133.82) rectangle (277.56, 183.18)   ;
\draw    (226.14,182.42) -- (226.37,194.49) ;
\draw [shift={(226.37,194.49)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (170.7, 194.49) rectangle (276.04, 218.09)   ;
\draw    (200.09, 263.87) rectangle (246.42, 287.47)   ;
\draw    (222.88,246.56) -- (223.26,263.87) ;
\draw [shift={(223.26,263.87)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (223.37,218.09) -- (223.75,235.4) ;
\draw [shift={(223.75,235.4)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;


\draw (153.34,16.43) node  [align=left] {{\footnotesize C}};
\draw (274.07,16.83) node  [align=left] {{\footnotesize Annotations}\\
{\footnotesize (logique de s\'eparation)}};
\draw (223.94,73.69) node  [align=left,color=red] {{\footnotesize Parsing}};
\draw (226.22,109.08) node  [align=left] {{\footnotesize Typing}};
\draw (230.02,156.71) node  [align=left] {{\footnotesize G\'en\'eration des }\\{\footnotesize conditions de }\\{\footnotesize verification}};
\draw (226.22,205.53) node  [align=left] {{\footnotesize Boxing}};
\draw (223.18,273.01) node  [align=left] {{\footnotesize Z3}};
\draw (224.42,239.25) node  [align=left] {{\footnotesize Logique du premier ordre }};
\draw (424.42,73.25) node  [align=left] {{\footnotesize La syntaxe du type tableau est :}\\{\footnotesize "$array(\sigma_I,\sigma_E$)"}};
\draw (434.42,130.08) node  [align=left] {{\footnotesize Par exemple un tableau de bool\'eens} \\{\footnotesize index\'es par des entiers s'\'ecrit}\\{\footnotesize "array(int,bool)"}};

\end{tikzpicture}
\end{frame}





\begin{frame}{Logique de sp\'ecification 2}

\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,498.23333740234375); %set diagram left start at 0, and has height of 498.23333740234375

\draw    (129, 49.51) rectangle (317.82, 227.83)   ;
\draw    (155.28,24.42) -- (155.28,49.78) ;
\draw [shift={(155.28,49.78)}, rotate = 270] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.6,34.47) -- (274.52,49.78) ;
\draw [shift={(274.52,49.78)}, rotate = 270.29] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.57, 62.49) rectangle (275.28, 86.08)   ;
\draw    (155.28,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 190.34] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.52,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 345.64] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (224.93,86.08) -- (225.15,98.15) ;
\draw [shift={(225.15,98.15)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.8, 98.15) rectangle (275.51, 121.75)   ;
\draw    (225.15,121.75) -- (225.38,133.82) ;
\draw [shift={(225.38,133.82)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (175.03, 133.82) rectangle (277.56, 183.18)   ;
\draw    (226.14,182.42) -- (226.37,194.49) ;
\draw [shift={(226.37,194.49)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (170.7, 194.49) rectangle (276.04, 218.09)   ;
\draw    (200.09, 263.87) rectangle (246.42, 287.47)   ;
\draw    (222.88,246.56) -- (223.26,263.87) ;
\draw [shift={(223.26,263.87)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (223.37,218.09) -- (223.75,235.4) ;
\draw [shift={(223.75,235.4)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;


\draw (153.34,16.43) node  [align=left] {{\footnotesize C}};
\draw (274.07,16.83) node  [align=left] {{\footnotesize Annotations}\\
{\footnotesize (logique de s\'eparation)}};
\draw (223.94,73.69) node  [align=left] {{\footnotesize Parsing}};
\draw (226.22,109.08) node  [align=left,color=red] {{\footnotesize Typing}};
\draw (230.02,156.71) node  [align=left] {{\footnotesize G\'en\'eration des }\\{\footnotesize conditions de }\\{\footnotesize verification}};
\draw (226.22,205.53) node  [align=left] {{\footnotesize Boxing}};
\draw (223.18,273.01) node  [align=left] {{\footnotesize Z3}};
\draw (224.42,239.25) node  [align=left] {{\footnotesize Logique du premier ordre }};
\draw (424.42,73.25) node  [align=left] {{\footnotesize Le typing est une phase v\'erifiant}\\ {\footnotesize la coh\'erence des types.}};
\draw (427.42,133.25) node [align=left] {{\footnotesize Les tableaux, seuls, ne posent pas }\\{\footnotesize de probl\`eme de coh\'erence.}};
\draw (414.42,193.25) node [align=left] {{\footnotesize Pour certaines utilisations, il}\\{\footnotesize faut v\'erifier la finitude}\\{\footnotesize ou l'habitation du type.}};

\end{tikzpicture}

\end{frame}




\begin{frame}{Logique du premier ordre de \verifast}

\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,498.23333740234375); %set diagram left start at 0, and has height of 498.23333740234375

\draw    (129, 49.51) rectangle (317.82, 227.83)   ;
\draw    (155.28,24.42) -- (155.28,49.78) ;
\draw [shift={(155.28,49.78)}, rotate = 270] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.6,34.47) -- (274.52,49.78) ;
\draw [shift={(274.52,49.78)}, rotate = 270.29] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.57, 62.49) rectangle (275.28, 86.08)   ;
\draw    (155.28,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 190.34] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.52,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 345.64] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (224.93,86.08) -- (225.15,98.15) ;
\draw [shift={(225.15,98.15)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.8, 98.15) rectangle (275.51, 121.75)   ;
\draw    (225.15,121.75) -- (225.38,133.82) ;
\draw [shift={(225.38,133.82)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (175.03, 133.82) rectangle (277.56, 183.18)   ;
\draw    (226.14,182.42) -- (226.37,194.49) ;
\draw [shift={(226.37,194.49)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (170.7, 194.49) rectangle (276.04, 218.09)   ;
\draw    (200.09, 263.87) rectangle (246.42, 287.47)   ;
\draw    (222.88,246.56) -- (223.26,263.87) ;
\draw [shift={(223.26,263.87)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (223.37,218.09) -- (223.75,235.4) ;
\draw [shift={(223.75,235.4)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;


\draw (153.34,16.43) node  [align=left] {{\footnotesize C}};
\draw (274.07,16.83) node  [align=left] {{\footnotesize Annotations}\\
{\footnotesize (logique de s\'eparation)}};
\draw (223.94,73.69) node  [align=left] {{\footnotesize Parsing}};
\draw (226.22,109.08) node  [align=left] {{\footnotesize Typing}};
\draw (230.02,156.71) node  [align=left] {{\footnotesize G\'en\'eration des }\\{\footnotesize conditions de }\\{\footnotesize verification}};
\draw (226.22,205.53) node  [align=left] {{\footnotesize Boxing}};
\draw (223.18,273.01) node  [align=left] {{\footnotesize Z3}};
\draw (224.42,239.25) node  [align=left,color=red] {{\footnotesize Logique du premier ordre }};
\draw (430.94,63.69) node  [align=left] {{\footnotesize $\Sigma^s$ = (inductive,int,real,boolean)}\\{\footnotesize $\Sigma^f$ = ($boxed_{int}$,$unboxed_{int}$,...,+,-,...)}};
\draw (435.94,120.69) node [align=left] {{\footnotesize Le type inductive repr\'esente plusieurs types}\\{\footnotesize dont les types g\'en\'eriques.}};
\draw (408.94,180.69) node [align=left] {{\footnotesize Utilisation de fonction de boxing}\\{\footnotesize et d'unboxing}};
\end{tikzpicture}

\end{frame}


\begin{frame}{Boxing}

\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,498.23333740234375); %set diagram left start at 0, and has height of 498.23333740234375

\draw    (129, 49.51) rectangle (317.82, 227.83)   ;
\draw    (155.28,24.42) -- (155.28,49.78) ;
\draw [shift={(155.28,49.78)}, rotate = 270] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.6,34.47) -- (274.52,49.78) ;
\draw [shift={(274.52,49.78)}, rotate = 270.29] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.57, 62.49) rectangle (275.28, 86.08)   ;
\draw    (155.28,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 190.34] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.52,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 345.64] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (224.93,86.08) -- (225.15,98.15) ;
\draw [shift={(225.15,98.15)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.8, 98.15) rectangle (275.51, 121.75)   ;
\draw    (225.15,121.75) -- (225.38,133.82) ;
\draw [shift={(225.38,133.82)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (175.03, 133.82) rectangle (277.56, 183.18)   ;
\draw    (226.14,182.42) -- (226.37,194.49) ;
\draw [shift={(226.37,194.49)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (170.7, 194.49) rectangle (276.04, 218.09)   ;
\draw    (200.09, 263.87) rectangle (246.42, 287.47)   ;
\draw    (222.88,246.56) -- (223.26,263.87) ;
\draw [shift={(223.26,263.87)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (223.37,218.09) -- (223.75,235.4) ;
\draw [shift={(223.75,235.4)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;


\draw (153.34,16.43) node  [align=left] {{\footnotesize C}};
\draw (274.07,16.83) node  [align=left] {{\footnotesize Annotations}\\
{\footnotesize (logique de s\'eparation)}};
\draw (223.94,73.69) node  [align=left] {{\footnotesize Parsing}};
\draw (226.22,109.08) node  [align=left] {{\footnotesize Typing}};
\draw (230.02,156.71) node  [align=left] {{\footnotesize G\'en\'eration des }\\{\footnotesize conditions de }\\{\footnotesize verification}};
\draw (226.22,205.53) node  [align=left,color=red] {{\footnotesize Boxing}};
\draw (223.18,273.01) node  [align=left] {{\footnotesize Z3}};
\draw (224.42,239.25) node  [align=left] {{\footnotesize Logique du premier ordre }};
\draw (396.42,93.25) node  [align=left] {{\footnotesize $boxed_{\sigma}$ : $\sigma$ $\rightarrow$ inductive}};
\draw (434.42,133.25) node  [align=left] {{\footnotesize $boxed_{array}$ :  }\\ {\footnotesize array(inductive,inductive) $\rightarrow$ inductive}};
\draw (404.42,163.25) node  [align=left] {{\footnotesize $unboxed_\sigma$ $\circ$ $boxed_\sigma$ = id }};
\draw (439.42,193.25) node  [align=left] {{\footnotesize $boxed_\sigma$ $\circ$ $unboxed_\sigma$ = id si $\sigma$ est infini}};

\end{tikzpicture}

\end{frame}





\begin{frame}{Ajout des fonctions}
Pour terminer l'impl\'ementation, il faut ajouter les fonctions de la th\'eorie. Il y a deux \'etapes : 
	\begin{itemize}
		\item Les int\'egrer \`a la logique de sp\'ecification. 
		\item Les relier aux fonctions de Z3.
	\end{itemize}
\end{frame}






\begin{frame}{Fonction dans la logique de sp\'ecification}
\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,498.23333740234375); %set diagram left start at 0, and has height of 498.23333740234375

\draw    (129, 49.51) rectangle (317.82, 227.83)   ;
\draw    (155.28,24.42) -- (155.28,49.78) ;
\draw [shift={(155.28,49.78)}, rotate = 270] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.6,34.47) -- (274.52,49.78) ;
\draw [shift={(274.52,49.78)}, rotate = 270.29] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.57, 62.49) rectangle (275.28, 86.08)   ;
\draw    (155.28,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 190.34] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.52,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 345.64] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (224.93,86.08) -- (225.15,98.15) ;
\draw [shift={(225.15,98.15)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.8, 98.15) rectangle (275.51, 121.75)   ;
\draw    (225.15,121.75) -- (225.38,133.82) ;
\draw [shift={(225.38,133.82)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (175.03, 133.82) rectangle (277.56, 183.18)   ;
\draw    (226.14,182.42) -- (226.37,194.49) ;
\draw [shift={(226.37,194.49)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (170.7, 194.49) rectangle (276.04, 218.09)   ;
\draw    (200.09, 263.87) rectangle (246.42, 287.47)   ;
\draw    (222.88,246.56) -- (223.26,263.87) ;
\draw [shift={(223.26,263.87)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (223.37,218.09) -- (223.75,235.4) ;
\draw [shift={(223.75,235.4)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;


\draw (153.34,16.43) node  [align=left] {{\footnotesize C}};
\draw (274.07,16.83) node  [align=left,color=red] {{\footnotesize Annotations}\\
{\footnotesize (logique de s\'eparation)}};
\draw (223.94,73.69) node  [align=left] {{\footnotesize Parsing}};
\draw (226.22,109.08) node  [align=left] {{\footnotesize Typing}};
\draw (230.02,156.71) node  [align=left] {{\footnotesize G\'en\'eration des }\\{\footnotesize conditions de }\\{\footnotesize verification}};
\draw (226.22,205.53) node  [align=left] {{\footnotesize Boxing}};
\draw (223.18,273.01) node  [align=left] {{\footnotesize Z3}};
\draw (224.42,239.25) node  [align=left] {{\footnotesize Logique du premier ordre }};
\draw (428.42,73.25) node  [align=left] {{\footnotesize Deux fixpoints, pr\'edicats ou lemme  }\\ {\footnotesize ne peuvent pas avoir un nom identique.}};
\draw (420.42,133.08) node  [align=left] {{\footnotesize Cr\'eation d'une nouvelle biblioth\`eque}};

\end{tikzpicture}
\end{frame}





\begin{frame}{Liaison avec Z3}
\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,498.23333740234375); %set diagram left start at 0, and has height of 498.23333740234375

\draw    (129, 49.51) rectangle (317.82, 227.83)   ;
\draw    (155.28,24.42) -- (155.28,49.78) ;
\draw [shift={(155.28,49.78)}, rotate = 270] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.6,34.47) -- (274.52,49.78) ;
\draw [shift={(274.52,49.78)}, rotate = 270.29] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.57, 62.49) rectangle (275.28, 86.08)   ;
\draw    (155.28,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 190.34] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (274.52,49.78) -- (224.93,62.49) ;
\draw [shift={(224.93,62.49)}, rotate = 345.64] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (224.93,86.08) -- (225.15,98.15) ;
\draw [shift={(225.15,98.15)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (174.8, 98.15) rectangle (275.51, 121.75)   ;
\draw    (225.15,121.75) -- (225.38,133.82) ;
\draw [shift={(225.38,133.82)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (175.03, 133.82) rectangle (277.56, 183.18)   ;
\draw    (226.14,182.42) -- (226.37,194.49) ;
\draw [shift={(226.37,194.49)}, rotate = 268.92] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (170.7, 194.49) rectangle (276.04, 218.09)   ;
\draw    (200.09, 263.87) rectangle (246.42, 287.47)   ;
\draw    (222.88,246.56) -- (223.26,263.87) ;
\draw [shift={(223.26,263.87)}, rotate = 268.74] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw [color=red]  (223.37,218.09) -- (223.75,235.4) ;
\draw [shift={(223.75,235.4)}, rotate = 268.74] [color=red]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;


\draw (153.34,16.43) node  [align=left] {{\footnotesize C}};
\draw (274.07,16.83) node  [align=left] {{\footnotesize Annotations}\\
{\footnotesize (logique de s\'eparation)}};
\draw (223.94,73.69) node  [align=left] {{\footnotesize Parsing}};
\draw (226.22,109.08) node  [align=left] {{\footnotesize Typing}};
\draw (230.02,156.71) node  [align=left] {{\footnotesize G\'en\'eration des }\\{\footnotesize conditions de }\\{\footnotesize verification}};
\draw (226.22,205.53) node  [align=left] {{\footnotesize Boxing}};
\draw (223.18,273.01) node  [align=left] {{\footnotesize Z3}};
\draw (224.42,239.25) node  [align=left] {{\footnotesize Logique du premier ordre }};

\end{tikzpicture}
\end{frame}







\section{Biblioth\`eques des tableaux et multi-ensembles}

\begin{frame}[noframenumbering,plain]
\tableofcontents[currentsection]
\end{frame}

\begin{frame}[fragile]{Biblioth\`eques de la th\'eorie des tableaux}

			\begin{lstlisting}[basicstyle=\footnotesize]
			
fixpoint u select<t,u> (array(t,u) arr, t x);
fixpoint array(t, u) store<t, u> (array(t, u) arr, t x, u y);
fixpoint array(t, u) constant_array<t,u> (u v);
fixpoint t array_ext<t, u> (array(t, u) a, array(t, u) b);

lemma void constant_select<t,u> (u v, t i)
  requires true;
  ensures select (constant_array<t,u>(v), i) == v;
  {}
  
lemma void select_store<t,u> (array(t,u) arr, t x, u y, t z)
  requires true;
  ensures select (store(arr, x, y), z) 
    		== ((x == z) ? y : select (arr, z));
  {}
    		
lemma void array_extensionality<t, u>(array(t, u) a,
                                       array(t, u) b)
  requires select(a, array_ext<t, u>(a, b)) 
		== select(b, array_ext<t, u>(a, b));
  ensures a == b;
  {}
			\end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Biblioth\`eques de la th\'eorie des tableaux 2}

			\begin{lstlisting}[basicstyle=\footnotesize]
predicate array_model (int* a, int b, int e,
                         array(int,int) arr) =
  (b >= e) ? true : (integer(a+b,?v) 
            &*& select(arr, b) == v 
            &*& array_model(a, b+1, e, arr));
  			
lemma void array_model_init(int* a, int length)
requires ints(a, length, _) &*& length >= 0;
ensures array_model(a, 0, length, _);
{...}

			\end{lstlisting}
\end{frame}

\begin{frame}[fragile]{Biblioth\`eque des multi-ensembles}
	
			\begin{lstlisting}[basicstyle=\footnotesize]
inductive multiset<t> = mk_multiset (array(t, nat));
  
fixpoint nat multiset_select<t>(multiset<t> m, t i)

fixpoint multiset<t> empty_multiset<t>()

fixpoint multiset<t> multiset_add<t>(multiset<t> m, t i)

fixpoint multiset<int> array_multiset(int b, nat n,
                                       array(int,int) arr) 

lemma t multiset_ext<t>(multiset<t> m1, multiset<t> m2)
  requires m1 != m2;
  ensures multiset_select(m1, result) !=
          multiset_select(m2, result);
  {...}
			\end{lstlisting}
			
			
\end{frame}

\begin{frame}[fragile]{Biblioth\`eque des multi-ensembles 2}

	\begin{lstlisting}[basicstyle=\footnotesize]
predicate same_multiset(array(int,int) a1, 
                         array(int,int) a2, int b, int e) =
  array_multiset(b, nat_of_int(e-b), a1) == 
  array_multiset(b, nat_of_int(e-b), a2);
	\end{lstlisting}
\end{frame}

\section{Quicksort}

\begin{frame}[noframenumbering,plain]
\tableofcontents[currentsection]
\end{frame}

\begin{frame}[fragile]{Rappel Quicksort}
\begin{lstlisting}[basicstyle=\footnotesize]
void swap (int* a, int i, int j)
{int b = a[i];  a[i] = a[j];  a[j] = b;}

int partition (int* arr, int lo, int hi)
{ int pivot = a[hi]; int i = lo - 1; int j;
  for (j = lo; j < hi; j++) {
    if (a[j] < pivot) {i++; if (i < j) swap(a, i, j);}
  }
  i++; if (i < hi) swap(a, i, hi); return i;}
  
void quicksort (int* a, int lo, int hi)
{if (lo > hi) return;
 int p = partition(a, lo, hi);
 quicksort(a, lo, p-1);
 quicksort(a, p+1, hi);}
		\end{lstlisting}

\end{frame}





\begin{frame}[fragile]{Sp\'ecification swap}
	\begin{lstlisting}[basicstyle=\footnotesize]
fixpoint array(int, int) array_swap(array(int, int) start,
                                    int i, int j) {
  return store(store(start, j, select(start, i)), 
               i, select(start, j));
}

void swap (int* a, int i, int j)
  //@ requires array_model(a, ?b, ?e, ?start) &*&
               b <= i &*& i < j &*& j < e;
  //@ ensures array_model(a, b, e, array_swap(start, i, j));
	\end{lstlisting}
	
\end{frame}






\begin{frame}[fragile]{Sp\'ecification partition}
	\begin{lstlisting}[basicstyle=\footnotesize]
int partition (int* a, int lo, int hi)
  /*@ requires array_model(a, lo, hi+1, ?start) &*& 
               lo <= hi &*&
               pivot == select(start, hi);
      ensures array_model(a, lo, hi+1, ?end) &*& 
              same_multiset(start, end, lo, hi+1) &*&
              lo <= result &*& result <= hi &*&
              select(end, result) == pivot &*&
              upper_bound(end, lo, result, pivot) &*&
              lower_bound(end, result+1, hi+1, pivot); @*/
	\end{lstlisting}
	
	

\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,300); %set diagram left start at 0, and has height of 300

\draw    (73.6, 64) rectangle (368.6, 88.47)   ;
\draw    (376.6, 63) rectangle (426.6, 88.47)   ;
\draw    (69.6, 111) rectangle (211.6, 133.47)   ;
\draw    (221.6, 110.47) rectangle (266.6, 134.47)   ;
\draw    (281, 111) rectangle (430.6, 133.47)   ;

\draw (251,99) node   {$int\ p\ =\ partition( a,lo,hi)$};
\draw (132.95,121) node   {$\leq $};
\draw (355,119) node   {$\geq $};
\draw (398,76) node  [align=left] {pivot};
\draw (244,123) node  [align=left] {pivot};


\end{tikzpicture}

	
\end{frame}







\begin{frame}[fragile]{Sp\'ecification partition 2}
	\begin{lstlisting}[basicstyle=\footnotesize]
int pivot = a[hi];
int i = lo - 1;
for (j = lo; j < hi; j++)
/*@ invariant array_model(a,lo,hi,?arr) &*&
              lo <= j &*& j < hi+1 &*& 
              i < j &*& lo -1 <= i &*& 
              same_multiset(start, arr, lo, hi) &*& 
              select(arr, hi) == p &*&
              upper_bound(arr,lo,i+1,pivot) &*& 
              lower_bound(arr,i+1,j,pivot); @*/
{
    if (a[j] < pivot) {
      i++;
      if (i < j) swap(a, i, j);
    }
}
i++;
if (i < hi) swap(a, i, hi);
return i;
	\end{lstlisting}

\end{frame}

\begin{frame}[fragile]{Sp\'ecification quicksort}
	\begin{lstlisting}[basicstyle=\footnotesize]
void quicksort (int* a, int lo, int hi)
  //@ requires array_model(a, lo, hi+1, ?start);
  //@ ensures array_model(a, lo, hi+1, ?end) &*& 
             same_multiset(start, end,lo,hi+1) &*& 
             sorted(end,lo,hi+1);

{
  if (lo > hi) return;
  int p = partition(a, lo, hi);
  quicksort(a, lo, p-1);
  quicksort(a, p+1, hi);
}
	\end{lstlisting}
\end{frame}






\begin{frame}[fragile]{Sp\'ecification quicksort 2}
\begin{lstlisting}[basicstyle=\footnotesize]
  int p = partition(a, lo, hi);
  quicksort(a, lo, p-1);
  quicksort(a, p+1, hi);
	\end{lstlisting}
	
\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,300); %set diagram left start at 0, and has height of 300

\draw    (53.6, 44) rectangle (348.6, 68.47)   ;
\draw    (356.6, 43) rectangle (406.6, 68.47)   ;
\draw    (49.6, 91) rectangle (191.6, 113.47)   ;
\draw    (201.6, 90.47) rectangle (246.6, 114.47)   ;
\draw    (261, 91) rectangle (410.6, 113.47)   ;
\draw    (206.6, 139.47) rectangle (246.6, 164.47)   ;
\draw    (261.6, 139) rectangle (410.6, 163.47)   ;
\draw    (44.6, 140) rectangle (193.6, 164.47)   ;
\draw    (75.6,158.47) -- (109.6,143.47) ;
\draw [shift={(109.6,143.47)}, rotate = 516.19] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (291.6,158.47) -- (325.6,143.47) ;
\draw [shift={(325.6,143.47)}, rotate = 516.19] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

\draw    (45.6, 179.47) rectangle (411.6, 208.47)   ;
\draw    (197.6,201.47) -- (269.6,187.47) ;
\draw [shift={(269.6,187.47)}, rotate = 529] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ]   (0,0) .. controls (3.31,-0.3) and (6.95,-1.4) .. (10.93,-3.29)(0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;


\draw (231,79) node   {$int\ p\ =\ partition( a,lo,hi)$};
\draw (112.95,101) node   {$\leq $};
\draw (335,99) node   {$\geq $};
\draw (378,56) node  [align=left] {pivot};
\draw (224,103) node  [align=left] {pivot};
\draw (225,150) node  [align=left] {pivot};
\draw (120,126) node   {$quicksort( a,lo,p-1)$};
\draw (338,123) node   {$quicksort( a,p+1,hi)$};
\draw (126.95,151) node   {$\leq $};
\draw (353,146) node   {$\geq $};


\end{tikzpicture}

\end{frame}

\section{Conclusion}

\begin{frame}[noframenumbering,plain]
\tableofcontents[currentsection]
\end{frame}

\begin{frame}{Conclusion}
Travail accompli :
\begin{itemize}
\item J'ai am\'elior\'e l'automatisation de \verifast{} avec la th\'eorie des tableaux
\item Les biblioth\`eques de la th\'eorie des tableaux et des multi-ensembles ont \'et\'e ajout\'ees.
\item Le Quicksort a \'et\'e prouv\'e avec \verifast.
\end{itemize}

Suite possible :
\begin{itemize}
\item Prouver d'autre programme afin d'enrichir les biblioth\`eques.
\item Ajouter des fonctions \`a la th\'eorie des tableaux.
\item Ajouter d'autres th\'eories
\end{itemize}
\end{frame}

\end{document}